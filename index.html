<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Fast Charger</title>

<style>
    body {
        margin: 0;
        padding: 18px;
        font-family: 'Inter', sans-serif;
        background: #111418;
        color: white;
    }

    h2 {
        margin-top: 12px;
        margin-bottom: 16px;
        font-size: 1.4rem;
        font-weight: 600;
    }

    /* User location box */
    .loc-box {
        background: #1b1f27;
        padding: 14px;
        border-radius: 18px;
        box-shadow: 0 4px 10px rgba(0,0,0,0.25);
        border: 1px solid rgba(255,255,255,0.04);
        margin-bottom: 20px;
    }

    /* Charger card */
    .card {
        background: #1a1d21;
        padding: 16px;
        border-radius: 18px;
        margin-bottom: 18px;
        box-shadow: 0 4px 12px rgba(0,0,0,0.25);
        border: 1px solid rgba(255,255,255,0.04);
    }

    .card-title {
        font-size: 1.1rem;
        font-weight: 600;
        color: #ffffff;
        display: flex;
        gap: 8px;
        align-items: center;
    }

    .distance {
        color: #37f0d8;
        font-weight: 600;
        font-size: 1rem;
    }

    .card-info {
        margin-top: 6px;
        color: #c7c7c7;
        font-size: 0.9rem;
        line-height: 1.35rem;
    }

    .status {
        margin-top: 10px;
        color: #37f0d8;
        font-weight: 500;
        font-size: 0.9rem;
    }

    .map-btn {
        margin-top: 16px;
        padding: 10px 14px;
        border-radius: 12px;
        border: 1px solid rgba(255,255,255,0.07);
        background: rgba(255,255,255,0.04);
        color: #37f0d8;
        font-weight: 600;
        width: fit-content;
    }
</style>
</head>

<body>

<h2>‚ö° Charger Terdekat</h2>

<!-- Lokasi user -->
<div id="userLocation" class="loc-box">
    Mendapatkan lokasi...
</div>

<!-- List charger -->
<div id="chargerList"></div>

<script>
// ===============================
// DATA LOKASI CHARGER
// ===============================
const chargers = [
  { name: "MAKA Kelapa Gading", lat: -6.159635, lng: 106.906682, power: "60 kW", nozzle: 3, hours: "24 Jam", status: "Available", link: "https://maps.app.goo.gl/xxxx" },
  { name: "Purnama Cibubur", lat: -6.368123, lng: 106.884412, power: "50 kW", nozzle: 2, hours: "24 Jam", status: "Available", link: "https://maps.app.goo.gl/xxxx" },
  { name: "Senayan Park", lat: -6.22522, lng: 106.80121, power: "150 kW", nozzle: 2, hours: "Tidak 24 Jam", status: "Unavailable", link: "https://maps.app.goo.gl/xxxx" }
];

// ===============================
// HITUNG JARAK
// ===============================
function distance(lat1, lon1, lat2, lon2) {
    const R = 6371;
    const dLat = (lat2 - lat1) * Math.PI/180;
    const dLon = (lon2 - lon1) * Math.PI/180;
    const a = 
        Math.sin(dLat/2) * Math.sin(dLat/2) +
        Math.cos(lat1*Math.PI/180) * Math.cos(lat2*Math.PI/180) *
        Math.sin(dLon/2) * Math.sin(dLon/2);
    const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
    return R * c;
}

// ===============================
// AMBIL LOKASI USER
// ===============================
navigator.geolocation.getCurrentPosition(success, error);

function success(pos) {
    const userLat = pos.coords.latitude;
    const userLng = pos.coords.longitude;

    document.getElementById("userLocation").innerHTML = `
        üìç Lokasi Anda<br>
        Lat: ${userLat.toFixed(6)}<br>
        Lng: ${userLng.toFixed(6)}<br>
        Akurasi: ${pos.coords.accuracy} m
    `;

    // Hitung jarak charger
    chargers.forEach(ch => {
        ch.distance = distance(userLat, userLng, ch.lat, ch.lng);
    });

    // Urutkan
    chargers.sort((a,b) => a.distance - b.distance);

    // Tampilkan
    renderChargers();
}

function error() {
    document.getElementById("userLocation").innerHTML =
        "‚ùå Izin lokasi ditolak";
}

// ===============================
// RENDER CARD PREMIUM
// ===============================
function renderChargers() {
    const box = document.getElementById("chargerList");
    box.innerHTML = "";

    chargers.forEach(ch => {
        box.innerHTML += `
            <div class="card">
                <div class="card-title">
                    ‚ö° ${ch.name}
                    <span class="distance">‚Ä¢ ${ch.distance.toFixed(1)} km</span>
                </div>

                <div class="card-info">
                    ${ch.power} ‚Ä¢ ${ch.nozzle} nozzle ‚Ä¢ ${ch.hours}
                </div>

                <div class="status">
                    Status: ${ch.status}
                </div>

                <a href="${ch.link}" target="_blank">
                    <div class="map-btn">Buka Maps ‚Üí</div>
                </a>
            </div>
        `;
    });
}
</script>

</body>
</html>
