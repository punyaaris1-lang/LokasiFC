<!-- Premium FC Locator UI - Reborn Version -->
<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0" />
    <title>Premium FC Locator</title>

    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet" />
    <style>
        body {
            background: #0c0f12;
            font-family: 'Inter', sans-serif;
            color: white;
        }
        .glass {
            backdrop-filter: blur(14px) saturate(170%);
            background: rgba(255, 255, 255, 0.06);
            border: 1px solid rgba(255, 255, 255, 0.08);
        }
        .glow-soft {
            box-shadow: 0 0 40px rgba(0, 255, 140, 0.12);
        }
        .status-online {
            background: rgba(0, 255, 120, 0.15);
            color: #4dffb8;
        }
        .status-offline {
            background: rgba(255, 70, 70, 0.15);
            color: #ff7a7a;
        }
    </style>
</head>
<body class="px-4 pt-6 pb-20">

    <!-- Header Premium -->
    <div class="mb-6">
        <h1 class="text-3xl font-bold tracking-tight">⚡ Fast Charging Locator</h1>
        <p class="text-gray-400 text-sm mt-1">Temukan fast charger terdekat dengan tampilan premium</p>
    </div>

    <!-- Lokasi Anda Card -->
    <div class="glass rounded-2xl p-5 mb-6 glow-soft">
        <p class="text-gray-400 text-xs mb-1">LOKASI ANDA</p>
        <p id="locText" class="text-lg font-semibold">Mengambil lokasi...</p>
        <p id="locAcc" class="text-gray-400 text-sm">Akurasi: -</p>
    </div>

    <!-- Container station cards -->
    <div id="stationList" class="space-y-5"></div>

<script>
// ================== DATA MANUAL ==================
const stations = [
    { name: "FC Kelapa Gading", lat: -6.15963, lng: 106.90668, power: "60 kW", nozzle: 3, price: "Gratis", open: "07:00", close: "23:00" },
    { name: "FC Cibubur", lat: -6.402484, lng: 106.936786, power: "50 kW", nozzle: 2, price: "Berbayar", open: "00:00", close: "23:59" },
    { name: "FC Bekasi", lat: -6.241586, lng: 107.000732, power: "50 kW", nozzle: 2, price: "Berbayar", open: "08:00", close: "22:00" }
];

// FUNCTION HITUNG ONLINE / OFFLINE
function isOpen(open, close) {
    const now = new Date();
    const cur = now.getHours() * 60 + now.getMinutes();
    const o = parseInt(open.split(":" )[0]) * 60 + parseInt(open.split(":" )[1]);
    const c = parseInt(close.split(":" )[0]) * 60 + parseInt(close.split(":" )[1]);

    if (o <= c) return cur >= o && cur <= c;
    return cur >= o || cur <= c; // untuk 24 jam mode
}

// ================== GET LOCATION ==================
navigator.geolocation.getCurrentPosition(
    pos => {
        const lat = pos.coords.latitude;
        const lng = pos.coords.longitude;

        document.getElementById("locText").innerText = `Lat ${lat.toFixed(6)}, Lng ${lng.toFixed(6)}`;
        document.getElementById("locAcc").innerText = `Akurasi: ${pos.coords.accuracy.toFixed(0)} m`;

        renderStations(lat, lng);
    },
    () => alert("Gagal mengambil lokasi. Aktifkan GPS anda.")
);

// ================== RENDER LIST ==================
function renderStations(userLat, userLng) {
    const container = document.getElementById("stationList");
    container.innerHTML = "";

    stations.forEach(st => {
        const distance = calcDistance(userLat, userLng, st.lat, st.lng);
        const open = isOpen(st.open, st.close);

        container.innerHTML += `

        <div class="glass rounded-2xl p-5 relative">

            <div class="flex items-center justify-between mb-2">
                <h2 class="text-xl font-semibold">${st.name}</h2>
                <span class="px-3 py-1 text-sm rounded-full ${open ? 'status-online' : 'status-offline'}">
                    ${open ? '● Online' : '● Offline'}
                </span>
            </div>

            <p class="text-gray-400 text-sm mb-1">${distance.toFixed(1)} km dari lokasi kamu</p>
            <p class="text-gray-300 text-sm mb-1">${st.power} • ${st.nozzle} nozzle</p>
            <p class="text-gray-300 text-sm mb-2">${st.open} — ${st.close}</p>

            <div class="flex items-center justify-between mt-3">
                <span class="text-gray-400">${st.price}</span>
                <a href="https://maps.google.com/?q=${st.lat},${st.lng}" class="px-4 py-2 rounded-xl bg-green-500 text-black font-semibold">Buka di Maps</a>
            </div>
        </div>

        `;
    });
}

// ================== FUNCTION DISTANCE ==================
function calcDistance(lat1, lon1, lat2, lon2) {
    const R = 6371;
    const dLat = (lat2 - lat1) * Math.PI/180;
    const dLon = (lon2 - lon1) * Math.PI/180;
    const a = Math.sin(dLat/2)**2 + Math.cos(lat1*Math.PI/180) * Math.cos(lat2*Math.PI/180) * Math.sin(dLon/2)**2;
    return R * 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
}
</script>

</body>
</html>
